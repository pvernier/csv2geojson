language: go
sudo: false
go: stable
install: "# skip"

script:
  - go vet
  - GOOS=linux GOARCH=amd64 go build -o "csv2geojson_$(git describe --tags)_linux-amd64"
  - GOOS=darwin GOARCH=amd64 go build -o "csv2geojson_$(git describe --tags)_darwin-amd64"
  - GOOS=windows GOARCH=amd64 go build -o "csv2geojson_$(git describe --tags)_windows-amd64.exe"

deploy:
  provider: releases
  skip_cleanup: true
  draft: true
  file_glob: true
  file: "csv2geojson_*"
  api_key:
    secure: secure: "LyXl9kCbfTk2IiQYhvhOzZtN0u86xcTPJT8hJlkBaUvVtgsTX6fkn5RmMTgxyJ9GcWe9b8HLTPztsBgu/7Vh46kQNnTpaB7ziQll+wpcGJtOMbmi6tEaLO9urzv2NZofgwNfmC+DE/cNKy02q8OqJSP6GCOqtEhtXQoq5muIv9VbwK5YomaUQdhrKcBmL4bhFh6Vul2w4XoIor0LjD8hZoVlYd/nhLCvUDaTRQnBmW7MoxLgJERHs+BVlAG2B0ZOvOB5cBbV1cnWa6TXmo5xgFwvP4ZXDKfE6CREHA6zIcbyx1OhVUm6IWkBfc3pMg++wrYsI3IX0sxTDrb2NRnYZGmbxc3/0C8o8A4bvJzIXVFK6PPc3b+CWJ4l+E4IRGVpN+MQVuWXpAq4U9+FlnRyTGd5aL4vqUZNXr32Uz7YH9u+6EFIASue4RUUROzmiOsfmJzGg3NtHf2Ptnmr/0sxCHwZI0zcm1GYGmcQ8+bQN2dvH/a2ghNDymdKSA4RyMaAOMXyOaYZLGX+ybNd2O7OaywihfpgYiStql2DeslPn+o8h5dPkq8tig/jxdUMJPQq2CtirNYd6syQiyeKCr3PmxaR4uqjtOYDzMz/VnwSLPE9FKgTDteRc9bWUtlXrZbLsTXeMeW2FOTpCoVHzI0Qehk6JR6uGkf21SNUddzO1hA="
  on:
    repo: pvernier/csv2geojson
tags: true
